<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>El Sabor Dobla'O - Pedidos Online</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="propertie.png">
    <link rel="shortcut icon" type="image/png" href="propertie.png">
    <link rel="apple-touch-icon" href="propertie.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <meta name="theme-color" content="#ff8c00">
    <meta name="description" content="Ordena las mejores dobladas guatemaltecas. Entrega rápida en zonas 1, 5, 9, 10, 15 y 16.">
    
    <style>
        input, select, textarea {
            font-size: 16px !important;
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo-nav">
                <img src="propertie.png" alt="El Sabor Dobla'O" class="nav-logo" width="50" height="38">
            </div>
            <button class="menu-toggle" id="menuToggle" aria-label="Menú">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#menu-section">🍴 Menú</a></li>
                <li><a href="#ubicacion-section">📍 Ubicación</a></li>
                <li><a href="#contacto-section">📞 Contacto</a></li>
            </ul>
        </div>
    </nav>

    <!-- HERO COMPACTO -->
    <header class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <img src="propertie.png" alt="El Sabor Dobla'O Logo" class="hero-logo" width="80" height="65">
            <h1>El Sabor Dobla'O</h1>
            <p class="hero-subtitle">✨ Auténtico sabor guatemalteco</p>

            <div class="hero-cta">
                <a href="#menu-section" class="btn-hero">
                    🍴 Ver Menú Completo
                </a>
            </div>
        </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container">
        <!-- SECCIÓN DE MENÚ -->
        <section id="menu-section" class="order-section">
            <div class="section">
                <div class="section-title">
                    <span class="section-icon">🍴</span>
                    <h2>Nuestro Menú</h2>
                </div>
                <div id="menuContainer">
                    <!-- El menú se cargará dinámicamente -->
                </div>
            </div>
        </section>
    </div>

    <!-- CARRITO FIJO -->
    <div class="cart-summary">
        <div class="cart-content">
            <div class="cart-info">
                <div class="cart-items" id="cartItemsCount">🛒 Tu carrito está vacío</div>
                <div class="cart-total">Total: <span id="cartTotal">Q0</span></div>
            </div>
            <button class="whatsapp-btn" onclick="openCheckout()" disabled id="whatsappBtn">
                <span>🛒</span>
                <span>Continuar</span>
            </button>
        </div>
    </div>

    <!-- MODAL DE COMBO -->
    <div id="comboModal" class="modal">
        <div class="modal-content">
            <h3>🍽️ Personaliza tu Combo</h3>
            <div id="comboConfig"></div>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal()">❌ Cancelar</button>
                <button class="btn-save" onclick="saveCombo()">✅ Agregar</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE CHECKOUT -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content modal-checkout">
            <h3>📋 Completa tu Pedido</h3>
            
            <!-- Resumen del pedido -->
            <div class="checkout-summary">
                <h4>📦 Tu Orden:</h4>
                <div id="checkoutOrderSummary" class="checkout-order-list"></div>
                <div class="checkout-total">
                    <strong>Total:</strong> <span id="checkoutTotal">Q0</span>
                </div>
            </div>

            <!-- Formulario de datos -->
            <form id="customerForm" class="checkout-form">
                <div class="form-group">
                    <label for="customerName">👤 Nombre completo *</label>
                    <input type="text" id="customerName" placeholder="Juan Pérez" required autocomplete="name">
                </div>
                
                <div class="form-group">
                    <label for="customerPhone">📱 Teléfono * (8 dígitos)</label>
                    <input type="tel" id="customerPhone" required maxlength="8" pattern="[0-9]{8}" placeholder="12345678" autocomplete="tel">
                </div>
                
                <div class="form-group">
                    <label for="customerZone">📍 Zona de Entrega *</label>
                    <select id="customerZone" required>
                        <option value="">Selecciona tu zona</option>
                        <option value="Zona 1">Zona 1 - Q25 envío</option>
                        <option value="Zona 5">Zona 5 - Q25 envío</option>
                        <option value="Zona 9">Zona 9 - Q25 envío</option>
                        <option value="Zona 10">Zona 10 - Q25 envío</option>
                        <option value="Zona 15">Zona 15 - Q20 envío</option>
                        <option value="Zona 16">Zona 16 - Q15 envío</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customerAddress">🏠 Dirección completa *</label>
                    <textarea id="customerAddress" rows="2" required placeholder="Ej: 5a avenida 10-20 zona 1, casa blanca con portón negro" autocomplete="street-address"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="paymentMethod">💳 Método de Pago *</label>
                    <select id="paymentMethod" required>
                        <option value="">Selecciona tu método de pago</option>
                        <option value="efectivo">💵 Efectivo</option>
                        <option value="tarjeta">💳 Tarjeta</option>
                        <option value="transferencia">🏦 Transferencia</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="deliveryTime">⏰ Tiempo de Entrega *</label>
                    <select id="deliveryTime" required>
                        <option value="">Selecciona tiempo de entrega</option>
                        <option value="hoy">🚚 Entrega HOY (30-45 min)</option>
                        <option value="hoy-hora">📅 Entrega HOY - Elegir Hora</option>
                        <option value="mañana">📅 Programar para MAÑANA</option>
                    </select>
                </div>
                
                <div class="form-group" id="horarioHoy" style="display: none;">
                    <label for="deliveryHourToday">🕐 Hora preferida para hoy *</label>
                    <select id="deliveryHourToday">
                        <option value="">Selecciona hora</option>
                        <option value="12:00-13:00">🕛 12:00 - 1:00 PM</option>
                        <option value="13:00-14:00">🕐 1:00 - 2:00 PM</option>
                        <option value="14:00-15:00">🕑 2:00 - 3:00 PM</option>
                        <option value="15:00-16:00">🕒 3:00 - 4:00 PM</option>
                        <option value="16:00-17:00">🕓 4:00 - 5:00 PM</option>
                        <option value="17:00-18:00">🕔 5:00 - 6:00 PM</option>
                        <option value="18:00-19:00">🕕 6:00 - 7:00 PM</option>
                        <option value="19:00-20:00">🕖 7:00 - 8:00 PM</option>
                    </select>
                </div>
                
                <div class="form-group" id="horarioMañana" style="display: none;">
                    <label for="deliveryHour">🕐 Hora preferida para mañana *</label>
                    <select id="deliveryHour">
                        <option value="">Selecciona hora</option>
                        <option value="10:00-11:00">🕙 10:00 - 11:00 AM</option>
                        <option value="11:00-12:00">🕚 11:00 - 12:00 PM</option>
                        <option value="12:00-13:00">🕛 12:00 - 1:00 PM</option>
                        <option value="13:00-14:00">🕐 1:00 - 2:00 PM</option>
                        <option value="14:00-15:00">🕑 2:00 - 3:00 PM</option>
                        <option value="15:00-16:00">🕒 3:00 - 4:00 PM</option>
                        <option value="16:00-17:00">🕓 4:00 - 5:00 PM</option>
                        <option value="17:00-18:00">🕔 5:00 - 6:00 PM</option>
                        <option value="18:00-19:00">🕕 6:00 - 7:00 PM</option>
                        <option value="19:00-20:00">🕖 7:00 - 8:00 PM</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="orderComments">💬 Comentarios Especiales</label>
                    <textarea id="orderComments" rows="2" placeholder="Ej: Sin cebolla, extra sal, etc."></textarea>
                </div>

                <!-- Factura -->
                <div class="form-group">
                    <div class="factura-toggle" onclick="toggleFactura()">
                        <span>📄 ¿Necesitas factura?</span> <span id="facturaArrow">▼</span>
                    </div>
                    <div id="facturaSection" style="display: none;">
                        <label for="facturaOption">Facturación:</label>
                        <select id="facturaOption">
                            <option value="no">No requiero factura</option>
                            <option value="cf">Consumidor Final (C/F)</option>
                            <option value="nit">Factura con NIT</option>
                        </select>
                        <div id="nitField" style="display: none; margin-top: 12px;">
                            <label for="customerNit">NIT:</label>
                            <input type="text" id="customerNit" maxlength="9" pattern="[0-9]{1,9}" placeholder="12345678">
                        </div>
                    </div>
                </div>
            </form>

            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeCheckout()">⬅️ Volver al Menú</button>
                <button class="btn-save btn-whatsapp" onclick="reviewOrder()">📱 Enviar Pedido</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE REVISIÓN FINAL -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <h3>📋 Confirmar Pedido</h3>
            <div class="order-review" id="orderReview"></div>
            <div class="order-total-section">
                <div class="order-total-line">
                    <span>💰 TOTAL A PAGAR:</span>
                    <span id="reviewTotal">Q0</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeReviewModal()">✏️ Editar</button>
                <button class="btn-save btn-whatsapp" onclick="sendToWhatsApp()">📱 Confirmar y Enviar</button>
            </div>
        </div>
    </div>

    <!-- FOOTER CON UBICACIÓN Y CONTACTO -->
    <footer class="footer" id="ubicacion-section">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>📍 Nuestra Ubicación</h3>
                    <p><strong>1 calle 11-91 zona 16</strong></p>
                    <p>Plaza Paseo Acatán, sobre el Boulevard Acatán</p>
                    <p>Local 2</p>
                    <div class="location-buttons">
                        <a href="https://maps.app.goo.gl/1uAKLqxbZ2wkrfGA8?g_st=ipc" target="_blank" class="btn-location">
                            🗺️ Abrir en Google Maps
                        </a>
                        <a href="https://waze.com/ul/h9fxejnq8m" target="_blank" class="btn-location">
                            🚗 Abrir en Waze
                        </a>
                    </div>
                    <p style="margin-top: 12px; font-size: 0.875rem; opacity: 0.9;">
                        Búscanos como: <strong>"El Sabor Doblao"</strong>
                    </p>
                </div>
                
                <div class="footer-section" id="contacto-section">
                    <h3>📞 Contacto</h3>
                    <p>📱 WhatsApp: <a href="https://wa.me/50234827948" target="_blank" class="contact-link">+502 3482-7948</a></p>
                    <p>📧 Email: <a href="mailto:info@elsabordoblao.com" class="contact-link">info@elsabordoblao.com</a></p>
                </div>
                
                <div class="footer-section">
                    <h3>⏰ Horarios</h3>
                    <p><strong>Lunes a Domingo</strong></p>
                    <p>10:00 AM - 8:00 PM</p>
                    <p style="margin-top: 8px; font-size: 0.875rem; color: var(--primary-yellow);">
                        🚚 Entregas en Zonas 1, 5, 9, 10, 15 y 16
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 El Sabor Dobla'O. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="js/menu.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/order.js"></script>
    
    <script>
        // Toggle menú móvil
        document.getElementById('menuToggle')?.addEventListener('click', function() {
            document.getElementById('navMenu')?.classList.toggle('active');
        });
        
        // Cerrar menú al hacer clic en un enlace
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('navMenu')?.classList.remove('active');
            });
        });
        
        // Cerrar menú al hacer clic fuera
        document.addEventListener('click', function(event) {
            const nav = document.getElementById('navMenu');
            const toggle = document.getElementById('menuToggle');
            if (nav && toggle && !nav.contains(event.target) && !toggle.contains(event.target)) {
                nav.classList.remove('active');
            }
        });
        
        // Smooth scroll para los enlaces del menú
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offsetTop = target.offsetTop - 70; // 70px para compensar el navbar fijo
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>